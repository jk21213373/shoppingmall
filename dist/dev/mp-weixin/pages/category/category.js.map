{"version":3,"file":"category.js","sources":["../../../../../src/pages/category/category.vue","../../../../../uniPage:/cGFnZXMvY2F0ZWdvcnkvY2F0ZWdvcnkudnVl"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { getCategoryTopAPI } from '@/services/category'\r\nimport { getHomeBannerAPI } from '@/services/home'\r\nimport type { CategoryTopItem } from '@/types/category'\r\nimport type { BannerItem } from '@/types/home'\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport { computed, ref } from 'vue'\r\nimport PageSkeleton from './components/PageSkeleton.vue'\r\n\r\n// 获取轮播图数据\r\nconst bannerList = ref<BannerItem[]>([])\r\nconst getBannerData = async () => {\r\n  const res = await getHomeBannerAPI(2)\r\n  bannerList.value = res.result\r\n}\r\n\r\n// 获取分类列表数据\r\nconst categoryList = ref<CategoryTopItem[]>([])\r\nconst activeIndex = ref(0)\r\nconst getCategoryTopData = async () => {\r\n  const res = await getCategoryTopAPI()\r\n  categoryList.value = res.result\r\n}\r\n\r\n// 是否数据加载完毕\r\nconst isFinish = ref(false)\r\n// 页面加载\r\nonLoad(async () => {\r\n  await Promise.all([getBannerData(), getCategoryTopData()])\r\n  isFinish.value = true\r\n})\r\n\r\n// 提取当前二级分类数据\r\nconst subCategoryList = computed(() => {\r\n  return categoryList.value[activeIndex.value]?.children || []\r\n})\r\n</script>\r\n\r\n<template>\r\n  <view class=\"viewport\" v-if=\"isFinish\">\r\n    <!-- 搜索框 -->\r\n    <view class=\"search\">\r\n      <view class=\"input\">\r\n        <text class=\"icon-search\">女靴</text>\r\n      </view>\r\n    </view>\r\n    <!-- 分类 -->\r\n    <view class=\"categories\">\r\n      <!-- 左侧：一级分类 -->\r\n      <scroll-view class=\"primary\" scroll-y>\r\n        <view v-for=\"(item, index) in categoryList\" :key=\"item.id\" class=\"item\"\r\n          :class=\"{ active: index === activeIndex }\" @tap=\"activeIndex = index\">\r\n          <text class=\"name\">\r\n            {{ item.name }}\r\n          </text>\r\n        </view>\r\n      </scroll-view>\r\n      <!-- 右侧：二级分类 -->\r\n      <scroll-view enable-back-to-top class=\"secondary\" scroll-y>\r\n        <!-- 焦点图 -->\r\n        <XRBFSwiper class=\"banner\" :list=\"bannerList\" />\r\n        <!-- 内容区域 -->\r\n        <view class=\"panel\" v-for=\"item in subCategoryList\" :key=\"item.id\">\r\n          <view class=\"title\">\r\n            <text class=\"name\">{{ item.name }}</text>\r\n            <navigator class=\"more\" hover-class=\"none\">全部</navigator>\r\n          </view>\r\n          <view class=\"section\">\r\n            <navigator v-for=\"goods in item.goods\" :key=\"goods.id\" class=\"goods\" hover-class=\"none\"\r\n              :url=\"`/pages/goods/goods?id=${goods.id}`\">\r\n              <image class=\"image\" :src=\"goods.picture\"></image>\r\n              <view class=\"name ellipsis\">{{ goods.name }}</view>\r\n              <view class=\"price\">\r\n                <text class=\"symbol\">¥</text>\r\n                <text class=\"number\">{{ goods.price }}</text>\r\n              </view>\r\n            </navigator>\r\n          </view>\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n  </view>\r\n  <PageSkeleton v-else />\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n@import './styles/category.scss';\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/Dell/Desktop/test/summer-fun-shopping/src/pages/category/category.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeBannerAPI","getCategoryTopAPI","onLoad","computed"],"mappings":";;;;;;;;;;;;;;;AAOA,MAAA,eAAyB,MAAA;;;;AAGnB,UAAA,aAAaA,kBAAkB,CAAA,CAAE;AACvC,UAAM,gBAAgB,YAAY;AAC1B,YAAA,MAAM,MAAMC,+BAAiB,CAAC;AACpC,iBAAW,QAAQ,IAAI;AAAA,IAAA;AAInB,UAAA,eAAeD,kBAAuB,CAAA,CAAE;AACxC,UAAA,cAAcA,kBAAI,CAAC;AACzB,UAAM,qBAAqB,YAAY;AAC/B,YAAA,MAAM,MAAME,kBAAAA;AAClB,mBAAa,QAAQ,IAAI;AAAA,IAAA;AAIrB,UAAA,WAAWF,kBAAI,KAAK;AAE1BG,kBAAAA,OAAO,YAAY;AACjB,YAAM,QAAQ,IAAI,CAAC,iBAAiB,mBAAoB,CAAA,CAAC;AACzD,eAAS,QAAQ;AAAA,IAAA,CAClB;AAGK,UAAA,kBAAkBC,cAAAA,SAAS,MAAM;;AACrC,eAAO,kBAAa,MAAM,YAAY,KAAK,MAApC,mBAAuC,aAAY;IAAC,CAC5D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCD,GAAG,WAAW,eAAe;"}