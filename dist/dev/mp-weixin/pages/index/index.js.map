{"version":3,"file":"index.js","sources":["../../../../../src/pages/index/index.vue","../../../../../uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { getHomeBannerAPI, getHomeCategoryAPI, getHomeHotAPI } from '@/services/home'\r\nimport type { BannerItem, CategoryItem, HotItem } from '@/types/home'\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport { ref } from 'vue'\r\nimport CustomNavbar from './components/CustomNavbar.vue'\r\nimport CategoryPanel from './components/CategoryPanel.vue'\r\nimport HotPanel from './components/HotPanel.vue'\r\nimport PageSkeleton from './components/PageSkeleton.vue'\r\nimport { useGuessList } from '@/composables'\r\n\r\n// 获取轮播图数据\r\nconst bannerList = ref<BannerItem[]>([])\r\nconst getHomeBannerData = async () => {\r\n  const res = await getHomeBannerAPI()\r\n  bannerList.value = res.result\r\n}\r\n\r\n// 获取前台分类数据\r\nconst categoryList = ref<CategoryItem[]>([])\r\nconst getHomeCategoryData = async () => {\r\n  const res = await getHomeCategoryAPI()\r\n  categoryList.value = res.result\r\n}\r\n\r\n// 获取热门推荐数据\r\nconst hotList = ref<HotItem[]>([])\r\nconst getHomeHotData = async () => {\r\n  const res = await getHomeHotAPI()\r\n  hotList.value = res.result\r\n}\r\n\r\n// 是否加载中标记\r\nconst isLoading = ref(false)\r\n\r\n// 页面加载\r\nonLoad(async () => {\r\n  isLoading.value = true\r\n  await Promise.all([getHomeBannerData(), getHomeCategoryData(), getHomeHotData()])\r\n  isLoading.value = false\r\n})\r\n\r\n// 猜你喜欢组合式函数调用\r\nconst { guessRef, onScrolltolower } = useGuessList()\r\n// 当前下拉刷新状态\r\nconst isTriggered = ref(false)\r\n// 自定义下拉刷新被触发\r\nconst onRefresherrefresh = async () => {\r\n  // 开始动画\r\n  isTriggered.value = true\r\n  // 加载数据\r\n  // await getHomeBannerData()\r\n  // await getHomeCategoryData()\r\n  // await getHomeHotData()\r\n  // 重置猜你喜欢组件数据\r\n  guessRef.value?.resetData()\r\n  await Promise.all([\r\n    getHomeBannerData(),\r\n    getHomeCategoryData(),\r\n    getHomeHotData(),\r\n    guessRef.value?.getMore(),\r\n  ])\r\n  // 关闭动画\r\n  isTriggered.value = false\r\n}\r\n</script>\r\n\r\n<template>\r\n  <view class=\"viewport\">\r\n    <!-- 自定义导航栏 -->\r\n    <CustomNavbar />\r\n    <!-- 滚动容器 -->\r\n    <scroll-view enable-back-to-top refresher-enabled @refresherrefresh=\"onRefresherrefresh\"\r\n      :refresher-triggered=\"isTriggered\" @scrolltolower=\"onScrolltolower\" class=\"scroll-view\" scroll-y>\r\n      <PageSkeleton v-if=\"isLoading\" />\r\n      <template v-else>\r\n        <!-- 自定义轮播图 -->\r\n        <XRBFSwiper :list=\"bannerList\" />\r\n        <!-- 分类面板 -->\r\n        <CategoryPanel :list=\"categoryList\" />\r\n        <!-- 热门推荐 -->\r\n        <HotPanel :list=\"hotList\" />\r\n        <!-- 猜你喜欢 -->\r\n        <XRBFGuess ref=\"guessRef\" />\r\n      </template>\r\n    </scroll-view>\r\n  </view>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\npage {\r\n  background-color: #f7f7f7;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.viewport {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.scroll-view {\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/Dell/Desktop/test/summer-fun-shopping/src/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeBannerAPI","getHomeCategoryAPI","getHomeHotAPI","onLoad","useGuessList"],"mappings":";;;;;;;;;;;;;;;;;AAKA,MAAA,eAAyB,MAAA;AACzB,MAAA,gBAA0B,MAAA;AAC1B,MAAA,WAAqB,MAAA;AACrB,MAAA,eAAyB,MAAA;;;;AAInB,UAAA,aAAaA,kBAAkB,CAAA,CAAE;AACvC,UAAM,oBAAoB,YAAY;AAC9B,YAAA,MAAM,MAAMC,cAAAA;AAClB,iBAAW,QAAQ,IAAI;AAAA,IAAA;AAInB,UAAA,eAAeD,kBAAoB,CAAA,CAAE;AAC3C,UAAM,sBAAsB,YAAY;AAChC,YAAA,MAAM,MAAME,cAAAA;AAClB,mBAAa,QAAQ,IAAI;AAAA,IAAA;AAIrB,UAAA,UAAUF,kBAAe,CAAA,CAAE;AACjC,UAAM,iBAAiB,YAAY;AAC3B,YAAA,MAAM,MAAMG,cAAAA;AAClB,cAAQ,QAAQ,IAAI;AAAA,IAAA;AAIhB,UAAA,YAAYH,kBAAI,KAAK;AAG3BI,kBAAAA,OAAO,YAAY;AACjB,gBAAU,QAAQ;AACZ,YAAA,QAAQ,IAAI,CAAC,kBAAA,GAAqB,uBAAuB,eAAgB,CAAA,CAAC;AAChF,gBAAU,QAAQ;AAAA,IAAA,CACnB;AAGD,UAAM,EAAE,UAAU,gBAAgB,IAAIC,kBAAa,aAAA;AAE7C,UAAA,cAAcL,kBAAI,KAAK;AAE7B,UAAM,qBAAqB,YAAY;;AAErC,kBAAY,QAAQ;AAMpB,qBAAS,UAAT,mBAAgB;AAChB,YAAM,QAAQ,IAAI;AAAA,QAChB,kBAAkB;AAAA,QAClB,oBAAoB;AAAA,QACpB,eAAe;AAAA,SACf,cAAS,UAAT,mBAAgB;AAAA,MAAQ,CACzB;AAED,kBAAY,QAAQ;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9DtB,GAAG,WAAW,eAAe;"}