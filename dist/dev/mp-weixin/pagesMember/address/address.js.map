{"version":3,"file":"address.js","sources":["../../../../../src/pagesMember/address/address.vue","../../../../../uniPage:/cGFnZXNNZW1iZXJcYWRkcmVzc1xhZGRyZXNzLnZ1ZQ"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { deleteMemberAddressByIdAPI, getMemberAddressAPI } from '@/services/address'\r\nimport { useAddressStore } from '@/stores/modules/address'\r\nimport type { AddressItem } from '@/types/address'\r\nimport { onShow } from '@dcloudio/uni-app'\r\nimport { ref } from 'vue'\r\n\r\n// 获取收货地址列表数据\r\nconst addressList = ref<AddressItem[]>([])\r\nconst getMemberAddressData = async () => {\r\n  const res = await getMemberAddressAPI()\r\n  addressList.value = res.result\r\n}\r\n\r\n// 初始化调用(页面显示)\r\nonShow(() => {\r\n  getMemberAddressData()\r\n})\r\n\r\n// 删除收货地址\r\nconst onDeleteAddress = (id: string) => {\r\n  // 二次确认\r\n  uni.showModal({\r\n    content: '删除地址?',\r\n    confirmColor: '#27BA9B',\r\n    success: async (res) => {\r\n      if (res.confirm) {\r\n        // 根据id删除收货地址\r\n        await deleteMemberAddressByIdAPI(id)\r\n        // 重新获取收货地址列表\r\n        getMemberAddressData()\r\n      }\r\n    },\r\n  })\r\n}\r\n\r\n// 修改收货地址\r\nconst onChangeAddress = (item: AddressItem) => {\r\n  // 修改地址\r\n  const addressStore = useAddressStore()\r\n  addressStore.changeSelectedAddress(item)\r\n  // 返回上一页\r\n  uni.navigateBack()\r\n}\r\n</script>\r\n\r\n<template>\r\n  <view class=\"viewport\">\r\n    <!-- 地址列表 -->\r\n    <scroll-view enable-back-to-top class=\"scroll-view\" scroll-y>\r\n      <view v-if=\"addressList.length\" class=\"address\">\r\n        <uni-swipe-action class=\"address-list\">\r\n          <!-- 收货地址项 -->\r\n          <uni-swipe-action-item class=\"item\" v-for=\"item in addressList\" :key=\"item.id\">\r\n            <view class=\"item-content\" @tap=\"onChangeAddress(item)\">\r\n              <view class=\"user\">\r\n                {{ item.receiver }}\r\n                <text class=\"contact\">{{ item.contact }}</text>\r\n                <text v-if=\"item.isDefault\" class=\"badge\">默认</text>\r\n              </view>\r\n              <view class=\"locate\">{{ item.fullLocation }} {{ item.address }}</view>\r\n              <!-- H5 端需添加 .prevent 阻止链接的默认行为 -->\r\n              <navigator\r\n                class=\"edit\"\r\n                hover-class=\"none\"\r\n                :url=\"`/pagesMember/address-form/address-form?id=${item.id}`\"\r\n                @tap.stop=\"() => {}\"\r\n                @tap.prevent=\"() => {}\"\r\n              >\r\n                修改\r\n              </navigator>\r\n            </view>\r\n            <!-- 右侧插槽 -->\r\n            <template #right>\r\n              <button @tap=\"onDeleteAddress(item.id)\" class=\"delete-button\">删除</button>\r\n            </template>\r\n          </uni-swipe-action-item>\r\n        </uni-swipe-action>\r\n      </view>\r\n      <view v-else class=\"blank\">暂无收货地址</view>\r\n    </scroll-view>\r\n    <!-- 添加按钮 -->\r\n    <view class=\"add-btn\">\r\n      <navigator hover-class=\"none\" url=\"/pagesMember/address-form/address-form\">\r\n        新建地址\r\n      </navigator>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\npage {\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 删除按钮 */\r\n.delete-button {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 50px;\r\n  height: 100%;\r\n  font-size: 28rpx;\r\n  color: #fff;\r\n  border-radius: 0;\r\n  padding: 0;\r\n  background-color: #cf4444;\r\n}\r\n\r\n.viewport {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  background-color: #f4f4f4;\r\n\r\n  .scroll-view {\r\n    padding-top: 20rpx;\r\n  }\r\n}\r\n\r\n.address {\r\n  padding: 0 20rpx;\r\n  margin: 0 20rpx;\r\n  border-radius: 10rpx;\r\n  background-color: #fff;\r\n\r\n  .item-content {\r\n    line-height: 1;\r\n    padding: 40rpx 10rpx 38rpx;\r\n    border-bottom: 1rpx solid #ddd;\r\n    position: relative;\r\n\r\n    .edit {\r\n      position: absolute;\r\n      top: 36rpx;\r\n      right: 30rpx;\r\n      padding: 2rpx 0 2rpx 20rpx;\r\n      border-left: 1rpx solid #666;\r\n      font-size: 26rpx;\r\n      color: #666;\r\n      line-height: 1;\r\n    }\r\n  }\r\n\r\n  .item:last-child .item-content {\r\n    border: none;\r\n  }\r\n\r\n  .user {\r\n    font-size: 28rpx;\r\n    margin-bottom: 20rpx;\r\n    color: #333;\r\n\r\n    .contact {\r\n      color: #666;\r\n    }\r\n\r\n    .badge {\r\n      display: inline-block;\r\n      padding: 4rpx 10rpx 2rpx 14rpx;\r\n      margin: 2rpx 0 0 10rpx;\r\n      font-size: 26rpx;\r\n      color: #27ba9b;\r\n      border-radius: 6rpx;\r\n      border: 1rpx solid #27ba9b;\r\n    }\r\n  }\r\n\r\n  .locate {\r\n    line-height: 1.6;\r\n    font-size: 26rpx;\r\n    color: #333;\r\n  }\r\n}\r\n\r\n.blank {\r\n  margin-top: 300rpx;\r\n  text-align: center;\r\n  font-size: 32rpx;\r\n  color: #888;\r\n}\r\n\r\n.add-btn {\r\n  height: 80rpx;\r\n  text-align: center;\r\n  line-height: 80rpx;\r\n  margin: 30rpx 20rpx;\r\n  color: #fff;\r\n  border-radius: 80rpx;\r\n  font-size: 30rpx;\r\n  background-color: #27ba9b;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/Dell/Desktop/test/summer-fun-shopping/src/pagesMember/address/address.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getMemberAddressAPI","onShow","uni","deleteMemberAddressByIdAPI","useAddressStore"],"mappings":";;;;;;;;;;;;;;;;;;;;AAQM,UAAA,cAAcA,kBAAmB,CAAA,CAAE;AACzC,UAAM,uBAAuB,YAAY;AACjC,YAAA,MAAM,MAAMC,iBAAAA;AAClB,kBAAY,QAAQ,IAAI;AAAA,IAAA;AAI1BC,kBAAAA,OAAO,MAAM;AACU;IAAA,CACtB;AAGK,UAAA,kBAAkB,CAAC,OAAe;AAEtCC,oBAAAA,MAAI,UAAU;AAAA,QACZ,SAAS;AAAA,QACT,cAAc;AAAA,QACd,SAAS,OAAO,QAAQ;AACtB,cAAI,IAAI,SAAS;AAEf,kBAAMC,iBAAAA,2BAA2B,EAAE;AAEd;UACvB;AAAA,QACF;AAAA,MAAA,CACD;AAAA,IAAA;AAIG,UAAA,kBAAkB,CAAC,SAAsB;AAE7C,YAAM,eAAeC,uBAAAA;AACrB,mBAAa,sBAAsB,IAAI;AAEvCF,oBAAA,MAAI,aAAa;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzCnB,GAAG,WAAW,eAAe;"}